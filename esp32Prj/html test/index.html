<!DOCTYPE html>    
<html lang="zh-CN">    
    <head>        
        <meta charset="UTF-8">        
        <meta http-equiv="X-UA-Compatible" content="IE=edge">        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        
        <title>Document</title>    
    </head>    
<body>        
    <p>hello world</p>
    <canvas id="tutorial" width="480" height="320"></canvas>
    <img id="bmpImg1"/>
</body>    
<script>    
function reFlash(){        
    location.reload();    }    
setInterval(reFlash, 100000);    
function draw(){        
    var canvas = document.getElementById('tutorial');        
    if(!canvas.getContext) return;        
    var ctx = canvas.getContext("2d");
    ctx.strokeStyle="#000000";
    ctx.moveTo(10, 310);
    ctx.lineTo(410, 310);
    ctx.stroke();
    ctx.moveTo(410, 310);
    ctx.lineTo(405, 305);
    ctx.stroke();
    ctx.moveTo(410, 310);
    ctx.lineTo(405, 315);
    ctx.stroke();
    ctx.moveTo(10, 310);
    ctx.lineTo(10, -90);
    ctx.stroke();
    ctx.moveTo(10, -90);
    ctx.lineTo(15, -85);
    ctx.stroke();
    ctx.moveTo(10, -90);
    ctx.lineTo(5, -85);
    ctx.stroke();
    ctx.strokeStyle="#000000";}    
draw();

var img = document.getElementById('bmpImg1'); 
var xhr = new XMLHttpRequest();   
var responseText = "";
function updateCounter(){        
    xhr.open('GET', 'http://192.168.4.1/updata');        
    xhr.onreadystatechange = function() {         
        // if (xhr.readyState == 4 && xhr.status == 206) {    
        //     responseText += xhr.responseText;
        //     updateCounter();
        // }
        if (xhr.readyState == 4 && xhr.status == 200) {        
            responseText += xhr.responseText;
            img.src = "data:image/bmp;base64,"+responseText;
            // console.log(responseText);
            responseText = ""
            // setTimeout(updateCounter, 100);
        }        
    };    
    xhr.send();    
}    
// updateCounter();
setInterval(updateCounter, 1000);
    function stringToHex(str){
    var val="";
    for(var i = 0; i < str.length; i++){

    if(val == "")
    val = str.charCodeAt(i).toString(16);
    else
    val += "," + str.charCodeAt(i).toString(16);
    }
    return val;
    }
console.log(stringToHex(window.atob("F/zX/Bf8")));
// console.log(window.btoa(0x17fc17fc17fc));
</script>        
</html>